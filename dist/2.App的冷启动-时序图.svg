<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1192px" preserveAspectRatio="none" style="width:885px;height:1192px;" version="1.1" viewBox="0 0 885 1192" width="885px" zoomAndPan="magnify"><defs><filter height="300%" id="fy8n11cas3mtc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="139" x="374" y="28.6855">App的冷启动过程</text><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="104.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="263" y="155.5625"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="35.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="263" y="943"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="35.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="263" y="1060.0547"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="138.4063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="505" y="289.9688"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="192.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="603" y="680.1875"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="48.5273" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="608" y="739.8906"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="268.8125" style="stroke: #000000; stroke-width: 2.0;" width="692.5" x="181.5" y="894.2969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="41" x2="41" y1="106.8594" y2="1180.1094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="267.5" x2="267.5" y1="106.8594" y2="1180.1094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="509.5" x2="509.5" y1="106.8594" y2="1180.1094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="607.5" x2="607.5" y1="106.8594" y2="1180.1094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="8" y="103.7832">Launcher</text><ellipse cx="41" cy="73.25" fill="#FEFECE" filter="url(#fy8n11cas3mtc)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="29" x2="53" y1="87.25" y2="87.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="191.5" y="86.1738">ActivityManagerService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="195" y="103.7832">(在SystemServer进程)</text><ellipse cx="268" cy="55.6406" fill="#FEFECE" filter="url(#fy8n11cas3mtc)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="256" x2="280" y1="69.6406" y2="69.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="471.5" y="103.7832">Zygote进程</text><ellipse cx="510" cy="73.25" fill="#FEFECE" filter="url(#fy8n11cas3mtc)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="498" x2="522" y1="87.25" y2="87.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="578.5" y="103.7832">App进程</text><ellipse cx="608" cy="73.25" fill="#FEFECE" filter="url(#fy8n11cas3mtc)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="596" x2="620" y1="87.25" y2="87.25"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="104.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="263" y="155.5625"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="35.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="263" y="943"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="35.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="263" y="1060.0547"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="138.4063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="505" y="289.9688"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="192.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="603" y="680.1875"/><rect fill="#FFFFFF" filter="url(#fy8n11cas3mtc)" height="48.5273" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="608" y="739.8906"/><polygon fill="#008000" points="251,151.5625,261,155.5625,251,159.5625,255,155.5625" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0;" x1="41" x2="257" y1="155.5625" y2="155.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="48" y="134.3545">Binder通信:请求启动Activity：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="52" y="150.7061">Instrumentation.execStartActivity()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="273" x2="315" y1="185.9141" y2="185.9141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="315" x2="315" y1="185.9141" y2="198.9141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="274" x2="315" y1="198.9141" y2="198.9141"/><polygon fill="#A80036" points="284,194.9141,274,198.9141,284,202.9141,280,198.9141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="280" y="181.0576">校验Activity</text><polygon fill="#A80036" points="52,225.2656,42,229.2656,52,233.2656,48,229.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46" x2="262" y1="229.2656" y2="229.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="58" y="224.4092">通知Launcher进入Paused状态</text><polygon fill="#A80036" points="256,255.6172,266,259.6172,256,263.6172,260,259.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="41" x2="262" y1="259.6172" y2="259.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="48" y="254.7607">准备就绪，已经进入Paused状态</text><polygon fill="#008000" points="493,285.9688,503,289.9688,493,293.9688,497,289.9688" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0;" x1="268" x2="499" y1="289.9688" y2="289.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="275" y="285.1123">socket通信:请求创建App进程</text><line style="stroke: #008000; stroke-width: 1.0;" x1="515" x2="557" y1="320.3203" y2="320.3203"/><line style="stroke: #008000; stroke-width: 1.0;" x1="557" x2="557" y1="320.3203" y2="333.3203"/><line style="stroke: #008000; stroke-width: 1.0;" x1="516" x2="557" y1="333.3203" y2="333.3203"/><polygon fill="#008000" points="526,329.3203,516,333.3203,526,337.3203,522,333.3203" style="stroke: #008000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="522" y="315.4639">fork App进程</text><polygon fill="#CCFFE5" filter="url(#fy8n11cas3mtc)" points="546,346.3203,669,346.3203,679,358.3203,669,370.3203,546,370.3203,536,358.3203,546,346.3203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="548" y="363.8154">三部曲：1. 启动进程</text><polygon fill="#A80036" points="596,394.0234,606,398.0234,596,402.0234,600,398.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="515" x2="602" y1="398.0234" y2="398.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="522" y="393.167">子进程</text><polygon fill="#A80036" points="279,424.375,269,428.375,279,432.375,275,428.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="273" x2="509" y1="428.375" y2="428.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="285" y="423.5186">父进程：socket通信:返回App进程pid</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="268" x2="310" y1="458.7266" y2="458.7266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="310" y1="458.7266" y2="471.7266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="269" x2="310" y1="471.7266" y2="471.7266"/><polygon fill="#A80036" points="279,467.7266,269,471.7266,279,475.7266,275,471.7266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="275" y="453.8701">记录pid</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="268" x2="310" y1="534.7813" y2="534.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="310" x2="310" y1="534.7813" y2="547.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="269" x2="310" y1="547.7813" y2="547.7813"/><polygon fill="#A80036" points="279,543.7813,269,547.7813,279,551.7813,275,547.7813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="275" y="497.2217">10秒倒计时，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="275" y="513.5732">等待App启动完成报到，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="275" y="529.9248">即下面的attach Application</text><polygon fill="#CCFFE5" filter="url(#fy8n11cas3mtc)" points="553,560.7813,663,560.7813,673,572.7813,663,584.7813,553,584.7813,543,572.7813,553,560.7813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="555" y="578.2764">三部曲：2. 初始化</text><line style="stroke: #008000; stroke-width: 1.0;" x1="608" x2="650" y1="612.4844" y2="612.4844"/><line style="stroke: #008000; stroke-width: 1.0;" x1="650" x2="650" y1="612.4844" y2="625.4844"/><line style="stroke: #008000; stroke-width: 1.0;" x1="609" x2="650" y1="625.4844" y2="625.4844"/><polygon fill="#008000" points="619,621.4844,609,625.4844,619,629.4844,615,625.4844" style="stroke: #008000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="615" y="607.6279">0、启动Binder机制</text><line style="stroke: #008000; stroke-width: 1.0;" x1="608" x2="655" y1="667.1875" y2="667.1875"/><line style="stroke: #008000; stroke-width: 1.0;" x1="655" x2="655" y1="667.1875" y2="680.1875"/><line style="stroke: #008000; stroke-width: 1.0;" x1="614" x2="655" y1="680.1875" y2="680.1875"/><polygon fill="#008000" points="624,676.1875,614,680.1875,624,684.1875,620,680.1875" style="stroke: #008000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="620" y="645.9795">1、执行App的入口函数</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="624" y="662.3311">ActivityThread.main()</text><line style="stroke: #008000; stroke-width: 1.0;" x1="613" x2="660" y1="726.8906" y2="726.8906"/><line style="stroke: #008000; stroke-width: 1.0;" x1="660" x2="660" y1="726.8906" y2="739.8906"/><line style="stroke: #008000; stroke-width: 1.0;" x1="619" x2="660" y1="739.8906" y2="739.8906"/><polygon fill="#008000" points="629,735.8906,619,739.8906,629,743.8906,625,739.8906" style="stroke: #008000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="625" y="705.6826">2、注册应用端的Binder对象：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="629" y="722.0342">ApplicationThread</text><polygon fill="#008000" points="279,784.418,269,788.418,279,792.418,275,788.418" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0;" x1="273" x2="602" y1="788.418" y2="788.418"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="285" y="783.5615">mgr.attachApplication(appThread)</text><path d="M61,757.8906 L61,799.8906 L259,799.8906 L259,767.8906 L249,757.8906 L61,757.8906 " fill="#FBFB77" filter="url(#fy8n11cas3mtc)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M249,757.8906 L249,767.8906 L259,767.8906 L249,757.8906 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="67" y="776.3857">App向AMS报到完成！</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="67" y="792.7373">App进程已启动、loop等待中。</text><polygon fill="#CCFFE5" filter="url(#fy8n11cas3mtc)" points="546,814.5938,669,814.5938,679,826.5938,669,838.5938,546,838.5938,536,826.5938,546,814.5938" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="548" y="832.0889">三部曲：3. 消息循环</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="613" x2="655" y1="871.2969" y2="871.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="655" x2="655" y1="871.2969" y2="884.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="608" x2="655" y1="884.2969" y2="884.2969"/><polygon fill="#A80036" points="618,880.2969,608,884.2969,618,888.2969,614,884.2969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="620" y="866.4404">Looper.loop()</text><path d="M181.5,894.2969 L254.5,894.2969 L254.5,902.2969 L244.5,912.2969 L181.5,912.2969 L181.5,894.2969 " fill="#CCFFE5" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="268.8125" style="stroke: #000000; stroke-width: 2.0;" width="692.5" x="181.5" y="894.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="196.5" y="908.792">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="259" x="269.5" y="907.7158">[mH处理AMS通过ApplicationThread发来的消息]</text><line style="stroke: #008000; stroke-width: 1.0;" x1="268" x2="315" y1="930" y2="930"/><line style="stroke: #008000; stroke-width: 1.0;" x1="315" x2="315" y1="930" y2="943"/><line style="stroke: #008000; stroke-width: 1.0;" x1="274" x2="315" y1="943" y2="943"/><polygon fill="#008000" points="284,939,274,943,284,947,280,943" style="stroke: #008000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="280" y="925.1436">3、初始化Application：</text><polygon fill="#008000" points="596,974.3516,606,978.3516,596,982.3516,600,978.3516" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0;" x1="268" x2="602" y1="978.3516" y2="978.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="275" y="973.4951">thread.bindApplication();</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="608" x2="650" y1="1008.7031" y2="1008.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="650" y1="1008.7031" y2="1021.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="609" x2="650" y1="1021.7031" y2="1021.7031"/><polygon fill="#A80036" points="619,1017.7031,609,1021.7031,619,1025.7031,615,1021.7031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="615" y="1003.8467">mH.sendMessage(H.BIND_APPLICATION)</text><line style="stroke: #008000; stroke-width: 1.0;" x1="268" x2="315" y1="1047.0547" y2="1047.0547"/><line style="stroke: #008000; stroke-width: 1.0;" x1="315" x2="315" y1="1047.0547" y2="1060.0547"/><line style="stroke: #008000; stroke-width: 1.0;" x1="274" x2="315" y1="1060.0547" y2="1060.0547"/><polygon fill="#008000" points="284,1056.0547,274,1060.0547,284,1064.0547,280,1060.0547" style="stroke: #008000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="280" y="1042.1982">4、启动挂起的Activity：</text><polygon fill="#008000" points="596,1091.4063,606,1095.4063,596,1099.4063,600,1095.4063" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0;" x1="268" x2="602" y1="1095.4063" y2="1095.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="275" y="1090.5498">thread.scheduleLaunchActivity()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="608" x2="650" y1="1142.1094" y2="1142.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="650" x2="650" y1="1142.1094" y2="1155.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="609" x2="650" y1="1155.1094" y2="1155.1094"/><polygon fill="#A80036" points="619,1151.1094,609,1155.1094,619,1159.1094,615,1155.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="615" y="1120.9014">创建Activity、执行生命周期：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="619" y="1137.2529">mH.sendMessage(H.LAUNCH_ACTIVITY)</text><!--MD5=[6ac2616222d787c2b229ccae5a7b32b3]
@startuml


title __App的冷启动过程__
hide footbox


entity "Launcher"
entity "ActivityManagerService\n(在SystemServer进程)" as AMS
entity "Zygote进程" as Zygote
entity "App进程" as App


Launcher [#green]-> AMS: Binder通信:请求启动Activity：\n Instrumentation.execStartActivity()
activate AMS
    AMS -> AMS: 校验Activity
    AMS - -> Launcher: 通知Launcher进入Paused状态
    Launcher - -> AMS: 准备就绪，已经进入Paused状态
deactivate AMS
AMS [#green]-> Zygote: socket通信:请求创建App进程
activate Zygote
    Zygote [#green]-> Zygote: fork App进程
    hnote over App#ccffe5: 三部曲：1. 启动进程
    Zygote -> App: 子进程
    Zygote - -> AMS: 父进程：socket通信:返回App进程pid
deactivate Zygote
AMS -> AMS: 记录pid
AMS -> AMS: 10秒倒计时，\n等待App启动完成报到，\n即下面的attach Application
hnote over App#ccffe5: 三部曲：2. 初始化
App [#green]-> App: 0、启动Binder机制
App [#green]-> App: 1、执行App的入口函数\n ActivityThread.main()
activate App
    App [#green]-> App: 2、注册应用端的Binder对象：\n ApplicationThread
    activate App
        App [#green]-> AMS: mgr.attachApplication(appThread)
        note left : App向AMS报到完成！\nApp进程已启动、loop等待中。
    deactivate App
    hnote over App#ccffe5: 三部曲：3. 消息循环
    App -> App: Looper.loop()
deactivate App
loop#ccffe5 mH处理AMS通过ApplicationThread发来的消息
    AMS [#green]-> AMS: 3、初始化Application：
    activate AMS
        AMS [#green]-> App: thread.bindApplication();
    deactivate AMS
    App -> App: mH.sendMessage(H.BIND_APPLICATION)

    AMS [#green]-> AMS: 4、启动挂起的Activity：
    activate AMS
        AMS [#green]-> App: thread.scheduleLaunchActivity()
    deactivate AMS
    App -> App: 创建Activity、执行生命周期：\n mH.sendMessage(H.LAUNCH_ACTIVITY)
end


@enduml

PlantUML version 1.2020.06(Sun Apr 05 20:38:32 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Windows 10
Default Encoding: UTF8
Language: zh
Country: CN
--></g></svg>